<html>
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css" rel="stylesheet">
    <link rel="stylesheet" href="~/css/site.css" type="text/css">
</head>
<body>
    <div class="LogPageContainer">
        @await Html.PartialAsync("bg")
        <div class="LogBoxContainer">
            <h1>Registration</h1>
            <div class="input-group mb-3" id="user">
                <span class="input-group-text" id="basic-addon1">Account</span>
                <input type="text" class="form-control" placeholder="username" aria-label="Username" aria-describedby="basic-addon1">
            </div>
            <div class="input-group mb-3" id="email">
                <span class="input-group-text" id="basic-addon1">Email</span>
                <input type="text" class="form-control" placeholder="input your email address" aria-label="Username" aria-describedby="basic-addon1">
            </div>
            <div class="input-group mb-3" id="password">
                <span class="input-group-text" id="basic-addon1">Password</span>
                <input type="text" class="form-control" placeholder="input your password" aria-label="Username" aria-describedby="basic-addon1">
            </div>
            <div class="input-group mb-3" id="confirmPW">
                <span class="input-group-text" id="basic-addon1"> Confirm Password</span>
                <input type="text" class="form-control" placeholder="confirm your password " aria-label="Username" aria-describedby="basic-addon1">
            </div>
            <div id="signText" type="text"></div>
            <button class="btn btn-primary" type="submit" id="register">Register</button>
      
        </div>

</body>

</html>
@section scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>

    <script>
        $(document).ready(function () {
            $('#register').on('click', function(event){
                console.log($('#confirmPW input').val());
                
                register();
            })

            function register() {
                var user = $('#user input').val();
                var email = $('#email input').val();
                var pw = $('#password input').val();
                var cpw = $('#confirmPW input').val();

                if (user && email && pw && cpw) {
                    if (cpw != pw) {
                        $('#signText').text('wrong password');
                        $('#confirmPW').addClass('wrong');
                    }
                    else {
                        $('#signText').text('');
                        $('#confirmPW').removeClass('wrong');
                        var key = CryptoJS.enc.Utf8.parse('54160469');
                        var encrypted = CryptoJS.AES.encrypt(pw, key, {
                            mode: CryptoJS.mode.ECB, // 可以選擇不同的模式，如 ECB、CBC 等
                            padding: CryptoJS.pad.Pkcs7
                        }).toString();

                        console.log('pw:' + encrypted);
                    }

                }
                else {
                    if (!user) {
                        $('#signText').text('user name can not be empty!');
                        $('#user').addClass('wrong');
                    }
                    else {
                        $('#signText').text('');
                        $('#user').removeClass('wrong');
                    }

                    if (!email) {
                        $('#signText').text('Email can not be empty!');
                        $('#email').addClass('wrong');
                    }
                    else {
                        $('#signText').text('');
                        $('#email').removeClass('wrong');
                    }

                    if (!pw) {
                        $('#signText').text('password can not be empty!');
                        $('#password').addClass('wrong');
                    }
                    else {
                        $('#signText').text('');
                        $('#password').removeClass('wrong');
                    }
                    if (!cpw) {
                        $('#signText').text('confirm password can not be empty!');
                        $('#confirmPW').addClass('wrong');
                    }
                    else {
                        $('#signText').Text('');
                        $('#confirmPW').removeClass('wrong');
                    }
                    
                }


               


            }
        });


    </script>
}


<style>
    .LogBoxContainer {
        position: fixed;
        display: inline-grid;
        gap: 8px;
        background-color: #EBF4FA;
        width: 650px;
        height: 600px;
        border-radius: 50px;
        box-shadow: -1px 1px 10px 8px gray;
        place-content: center;
        place-items: center;
    }

    .LogPageContainer {
        width: 100%;
        height: 100%;
        display: inline-flex;
        justify-content: center;
        align-items: center;
    }

    h1 {
        width: fit-content;
        position: absolute;
        top: 50px;
    }

    .input-group {
        width: 500px;
    }

    a {
        color: dimgray;
        font-size: 16px;
    }

    .line {
        width: fit-content;
        display: inline-flex;
        gap: 20px;
    }

    .btn{
        background-color:darkgray;
        border-color:darkgray;
        width:120px;
        height:50px;
        font-size:18px;
    }
    .btn:hover{
            background-color: gray;
            border-color: gray;
    }
    .wrong{
       box-shadow:0px 0px 5px 0px red;

    }
    #signText{
        color:darkred;
        font-size:18px;
    }
    


</style>
